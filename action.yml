# action.yml
name: 'Opcache Reset'
description: 'Reset PHP opcache on the server'
inputs:
  domain: 
    description: 'The domain to visit to clear opcache for'
    required: true
  port:
    description: 'The port for the http request to be made on'
    required: false
    default: "443"
  webroot:
    description: "The path of the site's webroot"
    required: true
  php_executable:
    description: 'The PHP executable to use'
    required: false
    default: 'php'
  owner:
    description: 'The user who should own the file'
    required: false
  group:
    description: 'The group the file should belong to'
    required: false
  permissions:
    description: 'The octal permissions to use'
    required: false
    default: "644"
  ssh_user:
    description: 'The user to connect to the server as'
    required: true
  ssh_host:
    description: 'The hostname or IP to use for connecting via SSH'
    required: true
  ssh_port:
    description: 'The SSH port for the server'
    required: false
    default: "22"
runs:
  using: "docker"
  image: "Dockerfile"
  args:
    - ${{ inputs.domain }}
    - ${{ inputs.port }}
    - ${{ inputs.webroot }}
    - ${{ inputs.php_executable }}
    - ${{ inputs.owner }}
    - ${{ inputs.group }}
    - ${{ inputs.permissions }}
    - ${{ inputs.ssh_user }}
    - ${{ inputs.ssh_host }}
    - ${{ inputs.ssh_port }}
# outputs:
#   status:
#     description: 'The status of the action'
# runs:
#   using: "composite"
#   steps:
#     - name: Output inputs
#       run: |
#         echo 'Domain: ${{ inputs.domain }}'
#       shell: bash
#     - name: Do stuff
#       run: |
#         echo 'Doing stuff'
#         echo "status=success" >> $GITHUB_OUTPUT
  # args:
  #   - ${{ inputs.domain }}
  #   - ${{ inputs.port }}
  #   - ${{ inputs.webroot }}
  #   - ${{ inputs.php_executable }}
  #   - ${{ inputs.owner }}
  #   - ${{ inputs.group }}
  #   - ${{ inputs.permissions }}
